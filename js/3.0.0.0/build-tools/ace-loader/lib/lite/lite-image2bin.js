"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),Jimp=require("jimp"),fs=require("fs"),_path=require("path");function img2bin(e){return _img2bin.apply(this,arguments)}function _img2bin(){return(_img2bin=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function e(t){var r,i,a,n,p,u,s,o,m,b,c,h,f;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jimp.read(t);case 3:r=e.sent,i=8,a=4,n=r.bitmap.width*r.bitmap.height*a,p=new ArrayBuffer(i+n),u=new DataView(p),s=256,o=0,m=16,b=(r.bitmap.width<<o)+(r.bitmap.height<<m),c=0,u.setUint32(c,s,!0),c+=4,u.setUint32(c,b,!0),c+=4,r.scan(0,0,r.bitmap.width,r.bitmap.height,function(e,t,r){var i=this.bitmap.data[r+2];u.setUint8(c,i,!0),c+=1;var a=this.bitmap.data[r+1];u.setUint8(c,a,!0),c+=1;var n=this.bitmap.data[r+0];u.setUint8(c,n,!0),c+=1;var p=this.bitmap.data[r+3];u.setUint8(c,p,!0),c+=1}),h=t.replace(/(\.png|\.jpg|\.bmp|\.jpeg|\.BMP|\.JPG|\.PNG|\.JPEG)$/,".bin"),fs.writeFileSync(h,Buffer.from(p)),e.next=29;break;case 24:throw e.prev=24,e.t0=e.catch(0),f=_path.basename(t),console.error("[31m","Failed to convert image ".concat(f,"."),"[39m"),e.t0;case 29:case"end":return e.stop()}},e,null,[[0,24]])}))).apply(this,arguments)}module.exports=img2bin;