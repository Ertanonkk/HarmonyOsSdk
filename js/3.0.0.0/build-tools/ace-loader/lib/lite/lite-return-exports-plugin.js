"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_newArrowCheck2=_interopRequireDefault(require("@babel/runtime/helpers/newArrowCheck")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),pluginName="LiteReturnExportsPlugin",LiteReturnExportsPlugin=function(){function e(){(0,_classCallCheck2.default)(this,e)}return(0,_createClass2.default)(e,[{key:"apply",value:function(e){var r=this;e.hooks.compilation.tap("SourcemapFixer",function(e){var t=this;(0,_newArrowCheck2.default)(this,r),e.hooks.afterProcessAssets.tap("SourcemapFixer",function(e){var r=this;(0,_newArrowCheck2.default)(this,t),Reflect.ownKeys(e).forEach(function(t){var i=this;if((0,_newArrowCheck2.default)(this,r),t.toString().includes(".map")&&e[t]&&e[t]._value){var a=JSON.parse(e[t]._value).sources;a.forEach(function(e,r){(0,_newArrowCheck2.default)(this,i),e=e.replace(/\\/g,"/").replace(/webpack:\/\/\/[A-Z]:/g,function(e){return e.toLowerCase()}),a[r]=e}.bind(this));var n=new RegExp(/"sources":\[.*?\]/);e[t]._value=e[t]._value.toString().replace(n,'"sources":'+JSON.stringify(a))}}.bind(this))}.bind(this))}.bind(this));var t=e.webpack.RuntimeGlobals.returnExportsFromRuntime;e.hooks.compilation.tap(pluginName,function(){(0,_newArrowCheck2.default)(this,r),e.webpack.RuntimeGlobals.returnExportsFromRuntime="__webpack_exports__"}.bind(this)),e.hooks.afterCompile.tapAsync(pluginName,function(i,a){(0,_newArrowCheck2.default)(this,r),e.webpack.RuntimeGlobals.returnExportsFromRuntime=t,a()}.bind(this))}}]),e}();module.exports=LiteReturnExportsPlugin;