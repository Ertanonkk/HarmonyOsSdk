"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.emitLogInfo=emitLogInfo,exports.addLog=addLog,exports.getMessage=getMessage,exports.hasDecorator=hasDecorator,exports.readFile=readFile,exports.createFunction=createFunction,exports.IGNORE_ERROR_CODE=exports.componentInfo=exports.FileLog=exports.LogType=void 0;var LogType,_typescript=_interopRequireDefault(require("typescript")),_path=_interopRequireDefault(require("path")),_fs=_interopRequireDefault(require("fs"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _newArrowCheck(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}exports.LogType=LogType,function(e){e.ERROR="ERROR",e.WARN="WARN",e.NOTE="NOTE"}(LogType||(exports.LogType=LogType={}));var FileLog=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"_sourceFile",void 0),_defineProperty(this,"_errors",[])}return _createClass(e,[{key:"sourceFile",get:function(){return this._sourceFile},set:function(e){this._sourceFile=e}},{key:"errors",get:function(){return this._errors},set:function(e){this._errors=e}}]),e}();function emitLogInfo(e,t){var r=this;t&&t.length&&t.forEach(function(t){switch(_newArrowCheck(this,r),t.type){case LogType.ERROR:e.emitError(getMessage(e.resourcePath,t));break;case LogType.WARN:case LogType.NOTE:e.emitWarning(getMessage(e.resourcePath,t))}}.bind(this))}function addLog(e,t,r,o,n){var i=n.getLineAndCharacterOfPosition(r);o.push({type:e,message:t,line:i.line+1,column:i.character+1,fileName:n.fileName})}function getMessage(e,t){return t.line&&t.column?"BUILD".concat(t.type," File: ").concat(e,":").concat(t.line,":").concat(t.column,"\n ").concat(t.message):"BUILD".concat(t.type," File: ").concat(e,"\n ").concat(t.message)}exports.FileLog=FileLog;var ComponentInfo=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"_id",0),_defineProperty(this,"_componentNames",new Set(["ForEach"]))}return _createClass(e,[{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"componentNames",get:function(){return this._componentNames},set:function(e){this._componentNames=e}}]),e}(),componentInfo=new ComponentInfo;function hasDecorator(e,t){if(e.decorators&&e.decorators.length)for(var r=0;r<e.decorators.length;r++)if(e.decorators[r].getText()===t)return!0;return!1}exports.componentInfo=componentInfo;var STATEMENT_EXPECT=1128,SEMICOLON_EXPECT=1005,IGNORE_ERROR_CODE=[STATEMENT_EXPECT,SEMICOLON_EXPECT];function readFile(e,t){var r=this;try{_fs.default.readdirSync(e).forEach(function(o){_newArrowCheck(this,r);var n=_path.default.join(e,o);_fs.default.statSync(n).isDirectory()?readFile(n,t):t.push(n)}.bind(this))}catch(e){console.error("ETS ERROR: "+e)}}function createFunction(e,t,r){return _typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(e,t),void 0,r&&r.length?r:[])}exports.IGNORE_ERROR_CODE=IGNORE_ERROR_CODE;